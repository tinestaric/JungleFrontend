var gdjs;(function(d){const S=new d.Logger("Tween");function h(a){return a.setScaleX&&a.setScaleY&&a.getScaleX&&a.getScaleY}function j(a){return a.setOpacity&&a.getOpacity}function u(a){return a.getZ&&a.setZ}function m(a){return a.setColor&&a.getColor}function O(a){return a.setCharacterSize&&a.getCharacterSize}const g=d.evtTools.common.lerp,T=d.evtTools.common.exponentialInterpolation,_=()=>{},p=a=>e=>a.setNumber(e),v=a=>e=>a.setX(e),C=a=>e=>a.setY(e),R=a=>u(a)?e=>a.setZ(e):()=>{},y=a=>([e,t])=>a.setPosition(e,t),P=a=>e=>a.setAngle(e),X=a=>e=>a.setWidth(e),D=a=>e=>a.setHeight(e),Y=a=>e=>a.setRotationX(e),H=a=>e=>a.setRotationY(e),B=a=>e=>a.setDepth(e),I=(a,e)=>e?([t,o])=>{const r=a.getCenterXInScene(),n=a.getCenterYInScene();a.setScaleX(t),a.setScaleY(o),a.setCenterPositionInScene(r,n)}:([t,o])=>{a.setScaleX(t),a.setScaleY(o)},x=(a,e,t)=>t?o=>{const r=a.getCenterXInScene(),n=a.getCenterYInScene(),i=e?e.getCenterZInScene():0;a.setScale(o),a.setCenterXInScene(r),a.setCenterYInScene(n),e&&e.setCenterZInScene(i)}:o=>a.setScale(o),M=(a,e)=>e?t=>{const o=a.getCenterXInScene();a.setScaleX(t),a.setCenterXInScene(o)}:t=>a.setScaleX(t),V=(a,e)=>e?t=>{const o=a.getCenterYInScene();a.setScaleY(t),a.setCenterYInScene(o)}:t=>a.setScaleY(t),F=a=>e=>a.setOpacity(e),N=a=>e=>a.setCharacterSize(e),A=(a,e)=>t=>{a.updateDoubleParameter(e,t)},k=(a,e)=>([t,o,r])=>{const n=d.evtTools.tween.hslToRgb(t,o,r);a.updateColorParameter(e,d.rgbToHexNumber(n[0],n[1],n[2]))},z=(a,e)=>e?([t,o,r])=>{const n=d.evtTools.tween.hslToRgb(t,o,r);a.setColor(Math.floor(n[0])+";"+Math.floor(n[1])+";"+Math.floor(n[2]))}:([t,o,r])=>{a.setColor(Math.floor(t)+";"+Math.floor(o)+";"+Math.floor(r))},Z=a=>([e,t,o])=>{const r=d.evtTools.tween.hslToRgb(e,t,o);a.setColor(Math.floor(r[0])+";"+Math.floor(r[1])+";"+Math.floor(r[2]))},E=a=>e=>{const t=e.type,o=e.variablePath,r=e.effectName,n=e.propertyName,i=!!e.scaleFromCenterOfObject,s=!!e.useHSLColorTransition;if(t==="objectValue")return _;if(t==="variable"&&o){const l=a.getVariables().getVariableFromPath(o);return l?p(l):()=>{}}if(t==="positionX")return v(a);if(t==="positionY")return C(a);if(t==="position")return y(a);if(t==="positionZ")return R(a);if(t==="width")return X(a);if(t==="height")return D(a);if(t==="depth")return u(a)?B(a):()=>{};if(t==="angle")return P(a);if(t==="rotationX")return u(a)?Y(a):()=>{};if(t==="rotationY")return u(a)?H(a):()=>{};if(t==="scale"){if(!h(a))return()=>{};const l=u(a)?a:null;return x(a,l,i)}if(t==="scaleXY")return h(a)?I(a,i):()=>{};if(t==="scaleX")return h(a)?M(a,i):()=>{};if(t==="scaleY")return h(a)?V(a,i):()=>{};if(t==="opacity")return j(a)?F(a):()=>{};if(t==="characterSize")return O(a)?N(a):()=>{};if(t==="numberEffectProperty"&&r&&n){const l=a.getRendererEffects()[r];return l||S.error(`The object "${a.name}" doesn't have any effect called "${r}"`),A(l,n)}if(t==="colorEffectProperty"&&r&&n){const l=a.getRendererEffects()[r];return l||S.error(`The object "${a.name}" doesn't have any effect called "${r}"`),k(l,n)}return t==="objectColor"?m(a)?z(a,s):()=>{}:t==="objectColorHSL"?m(a)?Z(a):()=>{}:()=>{}};class q extends d.RuntimeBehavior{constructor(e,t,o){super(e,t,o);this._tweens=new d.evtTools.tween.TweenManager;this._isActive=!0}updateFromBehaviorData(e,t){return!0}getNetworkSyncData(e){return{...super.getNetworkSyncData(e),props:{tweenManager:this._tweens.getNetworkSyncData()}}}updateFromNetworkSyncData(e,t){super.updateFromNetworkSyncData(e,t),e.props.tweenManager&&this._tweens.updateFromNetworkSyncData(e.props.tweenManager,o=>this.owner,o=>E(this.owner)(o),o=>o.destroyObjectWhenFinished?()=>this._deleteFromScene():null)}doStepPreEvents(e){this._tweens.step()}_deleteFromScene(){this.owner.deleteFromScene()}addVariableTween(e,t,o,r,n,i,s){this._tweens.addSimpleTween(e,this.owner.getRuntimeScene(),i/1e3,n,g,o,r,p(t),{type:"variable",variable:t,destroyObjectWhenFinished:s},s?()=>this._deleteFromScene():null)}addVariableTween2(e,t,o,r,n,i){this._addVariableTween(e,t,o,r,n/1e3,i,this.owner.getRuntimeScene())}addVariableTween3(e,t,o,r,n,i){this._addVariableTween(e,t,o,r,n,i,this.owner)}_addVariableTween(e,t,o,r,n,i,s){t.getType()==="number"&&this._tweens.addSimpleTween(e,s,n,r,g,t.getValue(),o,p(t),{type:"variable",variable:t,destroyObjectWhenFinished:i},i?()=>this._deleteFromScene():null)}addValueTween(e,t,o,r,n,i,s){this._tweens.addSimpleTween(e,this.owner,n,r,i?T:g,t,o,_,{type:"objectValue",destroyObjectWhenFinished:s},s?()=>this._deleteFromScene():null)}addObjectPositionTween(e,t,o,r,n,i){this._addObjectPositionTween(e,t,o,r,n/1e3,i,this.owner.getRuntimeScene())}addObjectPositionTween2(e,t,o,r,n,i){this._addObjectPositionTween(e,t,o,r,n,i,this.owner)}_addObjectPositionTween(e,t,o,r,n,i,s){this._tweens.addMultiTween(e,s,n,r,g,[this.owner.getX(),this.owner.getY()],[t,o],y(this.owner),{type:"position",destroyObjectWhenFinished:i},i?()=>this._deleteFromScene():null)}addObjectPositionXTween(e,t,o,r,n){this._addObjectPositionXTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectPositionXTween2(e,t,o,r,n){this._addObjectPositionXTween(e,t,o,r,n,this.owner)}_addObjectPositionXTween(e,t,o,r,n,i){this._tweens.addSimpleTween(e,i,r,o,g,this.owner.getX(),t,v(this.owner),{type:"positionX",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectPositionYTween(e,t,o,r,n){this._addObjectPositionYTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectPositionYTween2(e,t,o,r,n){this._addObjectPositionYTween(e,t,o,r,n,this.owner)}_addObjectPositionYTween(e,t,o,r,n,i){this._tweens.addSimpleTween(e,i,r,o,g,this.owner.getY(),t,C(this.owner),{type:"positionY",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectPositionZTween(e,t,o,r,n){this._addObjectPositionZTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectPositionZTween2(e,t,o,r,n,i){this._addObjectPositionZTween(t,o,r,n,i,this.owner)}_addObjectPositionZTween(e,t,o,r,n,i){const{owner:s}=this;!u(s)||this._tweens.addSimpleTween(e,i,r,o,g,s.getZ(),t,R(s),{type:"positionZ",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectAngleTween(e,t,o,r,n){this._addObjectAngleTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectAngleTween2(e,t,o,r,n){this._addObjectAngleTween(e,t,o,r,n,this.owner)}_addObjectAngleTween(e,t,o,r,n,i){this._tweens.addSimpleTween(e,i,r,o,g,this.owner.getAngle(),t,P(this.owner),{type:"angle",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectRotationXTween(e,t,o,r,n,i){const{owner:s}=this;!u(s)||this._tweens.addSimpleTween(t,this.owner,n,r,g,s.getRotationX(),o,Y(s),{type:"rotationX",destroyObjectWhenFinished:i},i?()=>this._deleteFromScene():null)}addObjectRotationYTween(e,t,o,r,n,i){const{owner:s}=this;!u(s)||this._tweens.addSimpleTween(t,this.owner,n,r,g,s.getRotationY(),o,H(s),{type:"rotationY",destroyObjectWhenFinished:i},i?()=>this._deleteFromScene():null)}addObjectScaleTween(e,t,o,r,n,i,s){this._addObjectScaleTween(e,t,o,r,n/1e3,i,s,this.owner.getRuntimeScene(),g)}addObjectScaleTween2(e,t,o,r,n,i,s){this._addObjectScaleTween(e,t,o,r,n,i,s,this.owner,T)}_addObjectScaleTween(e,t,o,r,n,i,s,l,c){const w=this.owner;!h(w)||(t<0&&(t=0),o<0&&(o=0),this._tweens.addMultiTween(e,l,n,r,c,[w.getScaleX(),w.getScaleY()],[t,o],I(w,s),{type:"scaleXY",destroyObjectWhenFinished:i},i?()=>this._deleteFromScene():null))}addObjectScaleTween3(e,t,o,r,n,i){this._addObjectScaleXTween(e,t,o,r,n,i,this.owner,T);const s=this.owner;if(!h(s))return;const l=u(s)?s:null;this._tweens.addSimpleTween(e,this.owner,r,o,T,s.getScale(),t,x(s,l,i),{type:"scale",scaleFromCenterOfObject:i,destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectScaleXTween(e,t,o,r,n,i){this._addObjectScaleXTween(e,t,o,r/1e3,n,i,this.owner.getRuntimeScene(),g)}addObjectScaleXTween2(e,t,o,r,n,i){this._addObjectScaleXTween(e,t,o,r,n,i,this.owner,T)}_addObjectScaleXTween(e,t,o,r,n,i,s,l){const c=this.owner;!h(c)||this._tweens.addSimpleTween(e,s,r,o,l,c.getScaleX(),t,M(c,i),{type:"scaleX",scaleFromCenterOfObject:i,destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectScaleYTween(e,t,o,r,n,i){this._addObjectScaleYTween(e,t,o,r/1e3,n,i,this.owner.getRuntimeScene(),g)}addObjectScaleYTween2(e,t,o,r,n,i){this._addObjectScaleYTween(e,t,o,r,n,i,this.owner,T)}_addObjectScaleYTween(e,t,o,r,n,i,s,l){const c=this.owner;!h(c)||this._tweens.addSimpleTween(e,s,r,o,l,c.getScaleY(),t,V(c,i),{type:"scaleY",scaleFromCenterOfObject:i,destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectOpacityTween(e,t,o,r,n){this._addObjectOpacityTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectOpacityTween2(e,t,o,r,n){this._addObjectOpacityTween(e,t,o,r,n,this.owner)}_addObjectOpacityTween(e,t,o,r,n,i){const s=this.owner;!j(s)||this._tweens.addSimpleTween(e,i,r,o,g,s.getOpacity(),t,F(s),{type:"opacity",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addNumberEffectPropertyTween(e,t,o,r,n,i,s,l){const c=this.owner.getRendererEffects()[r];c||S.error(`The object "${this.owner.name}" doesn't have any effect called "${r}"`),this._tweens.addSimpleTween(t,this.owner,s,i,g,c?c.getDoubleParameter(n):0,o,A(c,n),{type:"numberEffectProperty",effectName:r,propertyName:n,destroyObjectWhenFinished:l},l?()=>this._deleteFromScene():null)}addColorEffectPropertyTween(e,t,o,r,n,i,s,l){const c=this.owner.getRendererEffects()[r];c||S.error(`The object "${this.owner.name}" doesn't have any effect called "${r}"`);const w=d.hexNumberToRGB(c?c.getColorParameter(n):0),b=d.rgbOrHexToRGBColor(o);this._tweens.addMultiTween(t,this.owner,s,i,g,d.evtTools.tween.rgbToHsl(w.r,w.g,w.b),d.evtTools.tween.rgbToHsl(b[0],b[1],b[2]),k(c,n),{type:"colorEffectProperty",effectName:r,propertyName:n,destroyObjectWhenFinished:l},l?()=>this._deleteFromScene():null)}addObjectColorTween(e,t,o,r,n,i){this._addObjectColorTween(e,t,o,r/1e3,n,i,this.owner.getRuntimeScene())}addObjectColorTween2(e,t,o,r,n,i=!0){this._addObjectColorTween(e,t,o,r,n,i,this.owner)}_addObjectColorTween(e,t,o,r,n,i,s){const l=this.owner;if(!m(l))return;const c=d.rgbOrHexToRGBColor(l.getColor()),w=d.rgbOrHexToRGBColor(t),b=i?d.evtTools.tween.rgbToHsl(c[0],c[1],c[2]):c,f=i?d.evtTools.tween.rgbToHsl(w[0],w[1],w[2]):w;this._tweens.addMultiTween(e,s,r,o,g,b,f,z(l,i),{type:"objectColor",useHSLColorTransition:i,destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectColorHSLTween(e,t,o,r,n,i,s,l){this._addObjectColorHSLTween(e,t,o,r,n,i,s/1e3,l,this.owner.getRuntimeScene())}addObjectColorHSLTween2(e,t,o,r,n,i,s,l){this._addObjectColorHSLTween(e,t,o,r,n,i,s,l,this.owner)}_addObjectColorHSLTween(e,t,o,r,n,i,s,l,c){if(!m(this.owner))return;const w=this.owner,b=d.rgbOrHexToRGBColor(w.getColor()),f=d.evtTools.tween.rgbToHsl(b[0],b[1],b[2]),L=o?t:f[0],$=r===-1?f[1]:Math.min(Math.max(r,0),100),G=n===-1?f[2]:Math.min(Math.max(n,0),100);this._tweens.addMultiTween(e,c,s,i,g,f,[L,$,G],Z(w),{type:"objectColorHSL",destroyObjectWhenFinished:l},l?()=>this._deleteFromScene():null)}addTextObjectCharacterSizeTween(e,t,o,r,n){this._addTextObjectCharacterSizeTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene(),g)}addTextObjectCharacterSizeTween2(e,t,o,r,n){this._addTextObjectCharacterSizeTween(e,t,o,r,n,this.owner,T)}_addTextObjectCharacterSizeTween(e,t,o,r,n,i,s){const l=this.owner;!O(l)||this._tweens.addSimpleTween(e,i,r,o,s,l.getCharacterSize(),t,N(l),{type:"characterSize",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectWidthTween(e,t,o,r,n){this._addObjectWidthTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectWidthTween2(e,t,o,r,n){this._addObjectWidthTween(e,t,o,r,n,this.owner)}_addObjectWidthTween(e,t,o,r,n,i){this._tweens.addSimpleTween(e,i,r,o,g,this.owner.getWidth(),t,X(this.owner),{type:"width",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectHeightTween(e,t,o,r,n){this._addObjectHeightTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectHeightTween2(e,t,o,r,n){this._addObjectHeightTween(e,t,o,r,n,this.owner)}_addObjectHeightTween(e,t,o,r,n,i){this._tweens.addSimpleTween(e,i,r,o,g,this.owner.getHeight(),t,D(this.owner),{type:"height",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}addObjectDepthTween(e,t,o,r,n){this._addObjectDepthTween(e,t,o,r/1e3,n,this.owner.getRuntimeScene())}addObjectDepthTween2(e,t,o,r,n,i){this._addObjectDepthTween(t,o,r,n,i,this.owner)}_addObjectDepthTween(e,t,o,r,n,i){const{owner:s}=this;!u(s)||this._tweens.addSimpleTween(e,i,r,o,g,s.getDepth(),t,B(s),{type:"depth",destroyObjectWhenFinished:n},n?()=>this._deleteFromScene():null)}isPlaying(e){return this._tweens.isPlaying(e)}exists(e){return this._tweens.exists(e)}hasFinished(e){return this._tweens.hasFinished(e)}pauseTween(e){this._isActive&&this._tweens.pauseTween(e)}stopTween(e,t){this._isActive&&this._tweens.stopTween(e,t)}resumeTween(e){this._isActive&&this._tweens.resumeTween(e)}removeTween(e){this._tweens.removeTween(e)}getProgress(e){return this._tweens.getProgress(e)}getValue(e){return this._tweens.getValue(e)}onDeActivate(){this._isActive=!1}onActivate(){this._isActive=!0}}d.TweenRuntimeBehavior=q,d.registerBehavior("Tween::TweenBehavior",d.TweenRuntimeBehavior)})(gdjs||(gdjs={}));
//# sourceMappingURL=tweenruntimebehavior.js.map
